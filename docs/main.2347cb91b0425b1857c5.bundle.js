(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{159:function(module,exports,__webpack_require__){__webpack_require__(160),__webpack_require__(246),module.exports=__webpack_require__(247)},247:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__(45),__webpack_require__(46),__webpack_require__(44),__webpack_require__(62);var _storybook_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(69),req=__webpack_require__(322);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_4__.configure)(function loadStories(){req.keys().forEach(function(filename){return req(filename)})},module)}.call(this,__webpack_require__(119)(module))},322:function(module,exports,__webpack_require__){var map={"./index.stories.js":323};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=322},323:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__(49),__webpack_require__(63);var react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),_storybook_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(69),_src_index__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(50),_testData__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(94);__webpack_require__(327);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_3__.storiesOf)("拖放组件",module).add("demo1",function(){var DragSortItem=_src_index__WEBPACK_IMPORTED_MODULE_4__.a.Item;return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_src_index__WEBPACK_IMPORTED_MODULE_4__.a,{className:"demo-1"},_testData__WEBPACK_IMPORTED_MODULE_5__.a.map(function(item){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(DragSortItem,{className:"drag-item",tag:"div",key:item.id,id:item.id},item.name)}))}).add("demo2",function(){var DragSortItem=_src_index__WEBPACK_IMPORTED_MODULE_4__.a.Item;return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_src_index__WEBPACK_IMPORTED_MODULE_4__.a,{className:"demo-2"},_testData__WEBPACK_IMPORTED_MODULE_5__.a.map(function(item){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(DragSortItem,{className:"drag-item",tag:"div",key:item.id,id:item.id},item.name)}))})}.call(this,__webpack_require__(119)(module))},327:function(module,exports,__webpack_require__){var content=__webpack_require__(328);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(330)(content,options);content.locals&&(module.exports=content.locals)},328:function(module,exports,__webpack_require__){(module.exports=__webpack_require__(329)(!1)).push([module.i,".demo-1 .drag-item {\n  color: #fff;\n  width: 400px;\n  height: 50px;\n  line-height: 50px;\n  border-bottom: 1px solid red; }\n\n.demo-2 {\n  display: flex;\n  align-items: center; }\n  .demo-2 .drag-item {\n    color: #fff;\n    width: 100px;\n    height: 50px;\n    line-height: 50px;\n    margin-right: 20px;\n    border: 1px solid red; }\n",""])},50:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(133),__webpack_require__(90);var classCallCheck=__webpack_require__(31),createClass=__webpack_require__(32),possibleConstructorReturn=__webpack_require__(34),getPrototypeOf=__webpack_require__(33),assertThisInitialized=__webpack_require__(1),inherits=__webpack_require__(35),defineProperty=__webpack_require__(6),_react_16_8_6_react=__webpack_require__(9),_react_16_8_6_react_default=__webpack_require__.n(_react_16_8_6_react),_classnames_2_2_6_classnames=(__webpack_require__(64),__webpack_require__(158)),_classnames_2_2_6_classnames_default=__webpack_require__.n(_classnames_2_2_6_classnames),component_Component=function(_React$Component){function Component(){return Object(classCallCheck.a)(this,Component),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Component).apply(this,arguments))}return Object(inherits.a)(Component,_React$Component),Object(createClass.a)(Component,[{key:"classNames",value:function classNames(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _classnames_2_2_6_classnames_default()(args)}},{key:"className",value:function(){for(var className=this.props.className,_len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return this.classNames.apply(this,args.concat([className]))}},{key:"style",value:function(args){var style=this.props.style;return Object.assign({},args,style)}}]),Component}(_react_16_8_6_react_default.a.Component);component_Component.__docgenInfo={description:"",methods:[{name:"classNames",docblock:null,modifiers:[],params:[{name:"...args",type:null}],returns:null},{name:"className",docblock:null,modifiers:[],params:[{name:"...args",type:null}],returns:null},{name:"style",docblock:null,modifiers:[],params:[{name:"args",type:null}],returns:null}],displayName:"Component",props:{className:{type:{name:"string"},required:!1,description:""},style:{type:{name:"object"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["libs/component.js"]={name:"Component",docgenInfo:component_Component.__docgenInfo,path:"libs/component.js"});var _prop_types_15_7_2_prop_types=__webpack_require__(156),_prop_types_15_7_2_prop_types_default=__webpack_require__.n(_prop_types_15_7_2_prop_types),drag_sort_DragSort=function(_PureComponent){function DragSort(props){var _this;return Object(classCallCheck.a)(this,DragSort),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(DragSort).call(this,props)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"addDragItem",function(item){_this.dragItemList.push(item)}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"removeDragItem",function(item){item&&_this.dragItemList.splice(_this.dragItemList.indexOf(item),1)}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"handleMouseDown",function(e){var options=_this.props.options,type=e.type,target=e.target,originalTarget=e.target.shadowRoot&&e.path&&e.path[0]||target;console.log(target,originalTarget),!(/mousedown|pointerdown/.test(type)&&0!==e.button||options.disabled)&&(_this.currentDragSortItem=_this.dragItemList.find(function(item){return item.node===target}),!0===_this.currentDragSortItem.props.draggable&&target.setAttribute("draggable",!0))}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"handleDragEnter",function(e){console.log("==========================拖到元素上",e.target),e.target===_this.DragSortDom||_this.DragSortDom.insertBefore(_this.currentDragSortItem.node,e.target)}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"handleDragLeave",function(e){console.log("=====================离开",e.target);var _assertThisInitialize=Object(assertThisInitialized.a)(_this),DragSortDom=_assertThisInitialize.DragSortDom,currentDragSortItem=_assertThisInitialize.currentDragSortItem;currentDragSortItem.node!==e.target&&e.target===_this.dragItemList[_this.dragItemList.length-1].node&&DragSortDom.appendChild(currentDragSortItem.node)}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"handleDragStart",function(e){console.log("============111111========开始拖放",e.target)}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"handleDragEnd",function(e){console.log("============111111========拖放结束",e.target),e.target.setAttribute("draggable",!1)}),_this.dragItemList=[],_this.currentDragSortItem=null,_this.DragSortDom=null,_this}return Object(inherits.a)(DragSort,_PureComponent),Object(createClass.a)(DragSort,[{key:"getChildContext",value:function getChildContext(){return{component:this}}},{key:"render",value:function render(){var _this2=this,_this$props=this.props,Component=_this$props.tag,className=_this$props.className;return _react_16_8_6_react_default.a.createElement(Component,{ref:function ref(e){_this2.DragSortDom=e},className:className,onDragEnter:this.handleDragEnter,onDragLeave:this.handleDragLeave,onMouseDown:this.handleMouseDown,onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd},this.props.children)}}]),DragSort}(component_Component);drag_sort_DragSort.displayName="DragSort",drag_sort_DragSort.childContextTypes={component:_prop_types_15_7_2_prop_types_default.a.any},drag_sort_DragSort.defaultProps={tag:"div",className:"",options:{disabled:!1}},drag_sort_DragSort.__docgenInfo={description:"",methods:[{name:"addDragItem",docblock:null,modifiers:[],params:[{name:"item",type:null}],returns:null},{name:"removeDragItem",docblock:null,modifiers:[],params:[{name:"item",type:null}],returns:null},{name:"handleMouseDown",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"handleDragEnter",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"handleDragLeave",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"handleDragStart",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"handleDragEnd",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null}],displayName:"DragSort",props:{tag:{defaultValue:{value:"'div'",computed:!1},type:{name:"custom",raw:"PropTypes.string"},required:!1,description:""},className:{defaultValue:{value:"''",computed:!1},type:{name:"custom",raw:"PropTypes.string"},required:!1,description:""},options:{defaultValue:{value:"{\n    disabled:false\n}",computed:!1},type:{name:"custom",raw:"PropTypes.shape({\n    disabled:PropTypes.bool\n})"},required:!1,description:""}},childContext:{component:{type:{name:"custom",raw:"PropTypes.any"},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/drag-sort.jsx"]={name:"DragSort",docgenInfo:drag_sort_DragSort.__docgenInfo,path:"src/drag-sort.jsx"});__webpack_require__(49),__webpack_require__(326);var drag_sort_item_DragSortItem=function(_PureComponent){function DragSortItem(props){var _this;return Object(classCallCheck.a)(this,DragSortItem),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(DragSortItem).call(this,props)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"parent",function(){return _this.context.component}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"domdrugstart",function(e,currentData){var key=Object(assertThisInitialized.a)(_this).key,data=_this.props.data;_this.currentDragData=currentData;var contentNode=e.target.firstElementChild;_this.currentDragNodeWidth=contentNode.clientWidth,_this.dragIngIndex=_.findIndex(data,function(item){return item[key]===currentData[key]})}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"dragenter",function(e,enterData){var _assertThisInitialize2=Object(assertThisInitialized.a)(_this),currentDragData=_assertThisInitialize2.currentDragData,key=_assertThisInitialize2.key,currentDragNodeWidth=_assertThisInitialize2.currentDragNodeWidth,_this$props=_this.props,data=_this$props.data,onChange=_this$props.onChange;_this.enterDragData=enterData,enterData[key]&&-1!==_this.dragIngIndex&&enterData[key]!==currentDragData[key]&&(console.log("============进来了",enterData.name),_this.dragEnterIndex=_.findIndex(data,function(item){return item[key]===enterData[key]}),data.splice(_this.dragIngIndex,1),data.splice(_this.dragEnterIndex,0,"kongdezhanweide"),console.log(_this.dragIngIndex,_this.dragEnterIndex),onChange(data),window.setTimeout(function(){_this.kongdeNode.style.width="".concat(currentDragNodeWidth,"px")},50),window.clearTimeout(_this.throttleTime))}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"dragleave",function(e,leaveData){var _assertThisInitialize3=Object(assertThisInitialized.a)(_this),enterDragData=_assertThisInitialize3.enterDragData,key=_assertThisInitialize3.key;if(console.log("============离开了",leaveData.name),enterDragData[key]===leaveData[key]&&_this.throttleTime&&(window.clearTimeout(_this.throttleTime),_this.throttleTime=0),!leaveData[key]){var _this$props2=_this.props,data=_this$props2.data,onChange=_this$props2.onChange;data.splice(_this.dragEnterIndex,1,_this.currentDragData),onChange(data)}}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"drop",function(e){e.preventDefault();var _this$props3=_this.props,data=_this$props3.data,onChange=_this$props3.onChange;console.log("================================="),data.splice(_this.dragEnterIndex,1,_this.currentDragData),onChange(data)}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"dragOver",function(e){e.preventDefault(),console.log("==================dragOver")}),_this.node=null,_this}return Object(inherits.a)(DragSortItem,_PureComponent),Object(createClass.a)(DragSortItem,[{key:"componentDidMount",value:function componentDidMount(){this.parent().addDragItem(this)}},{key:"componentWillMount",value:function componentWillMount(){this.parent().removeDragItem(this)}},{key:"render",value:function render(){var _this2=this,_this$props4=this.props,Component=_this$props4.tag,id=_this$props4.id,className=_this$props4.className;_this$props4.draggable;return _react_16_8_6_react_default.a.createElement(Component,{"data-id":id,className:className,ref:function ref(e){_this2.node=e}},this.props.children)}}]),DragSortItem}(component_Component);drag_sort_item_DragSortItem.displayName="DragSortItem",drag_sort_item_DragSortItem.contextTypes={component:_prop_types_15_7_2_prop_types_default.a.any},drag_sort_item_DragSortItem.defaultProps={tag:"div",className:"",draggable:!0},drag_sort_item_DragSortItem.__docgenInfo={description:"",methods:[{name:"parent",docblock:"获得父元素",modifiers:[],params:[],returns:null,description:"获得父元素"},{name:"domdrugstart",docblock:null,modifiers:[],params:[{name:"e",type:null},{name:"currentData",type:null}],returns:null},{name:"dragenter",docblock:null,modifiers:[],params:[{name:"e",type:null},{name:"enterData",type:null}],returns:null},{name:"dragleave",docblock:null,modifiers:[],params:[{name:"e",type:null},{name:"leaveData",type:null}],returns:null},{name:"drop",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"dragOver",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null}],displayName:"DragSortItem",props:{tag:{defaultValue:{value:'"div"',computed:!1},type:{name:"custom",raw:"PropTypes.string"},required:!1,description:""},className:{defaultValue:{value:'""',computed:!1},type:{name:"custom",raw:"PropTypes.string"},required:!1,description:""},draggable:{defaultValue:{value:"true",computed:!1},type:{name:"custom",raw:"PropTypes.bool"},required:!1,description:""},id:{type:{name:"custom",raw:"PropTypes.string.isRequired"},required:!1,description:""}},context:{component:{type:{name:"custom",raw:"PropTypes.any"},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/drag-sort-item.jsx"]={name:"DragSortItem",docgenInfo:drag_sort_item_DragSortItem.__docgenInfo,path:"src/drag-sort-item.jsx"}),drag_sort_DragSort.Item=drag_sort_item_DragSortItem;__webpack_exports__.a=drag_sort_DragSort},94:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a=[{name:"我是1",id:"1"},{name:"我是2",id:"2"},{name:"我是3",id:"3"},{name:"我是4",id:"4"},{name:"我是5",id:"5"}]}},[[159,1,2]]]);
//# sourceMappingURL=main.2347cb91b0425b1857c5.bundle.js.map