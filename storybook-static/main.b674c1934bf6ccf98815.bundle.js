(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{154:function(module,exports,__webpack_require__){__webpack_require__(155),__webpack_require__(241),module.exports=__webpack_require__(242)},242:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__(40),__webpack_require__(41),__webpack_require__(39),__webpack_require__(56);var _storybook_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(65),req=__webpack_require__(315);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_4__.configure)(function loadStories(){req.keys().forEach(function(filename){return req(filename)})},module)}.call(this,__webpack_require__(115)(module))},315:function(module,exports,__webpack_require__){var map={"./index.stories.js":316};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=315},316:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__(44),__webpack_require__(57);var react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),_storybook_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(65),_src_index__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(46),_testData__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(90);__webpack_require__(320);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_3__.storiesOf)("拖放组件",module).add("demo1",function(){var DragSortItem=_src_index__WEBPACK_IMPORTED_MODULE_4__.a.Item;return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_src_index__WEBPACK_IMPORTED_MODULE_4__.a,{className:"demo-1"},_testData__WEBPACK_IMPORTED_MODULE_5__.a.map(function(item){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(DragSortItem,{className:"drag-item",tag:"div",key:item.id,id:item.id},item.name)}))}).add("demo2",function(){var DragSortItem=_src_index__WEBPACK_IMPORTED_MODULE_4__.a.Item;return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_src_index__WEBPACK_IMPORTED_MODULE_4__.a,{className:"demo-2"},_testData__WEBPACK_IMPORTED_MODULE_5__.a.map(function(item){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(DragSortItem,{className:"drag-item",tag:"div",key:item.id,id:item.id},item.name)}))})}.call(this,__webpack_require__(115)(module))},320:function(module,exports,__webpack_require__){var content=__webpack_require__(321);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(323)(content,options);content.locals&&(module.exports=content.locals)},321:function(module,exports,__webpack_require__){(module.exports=__webpack_require__(322)(!1)).push([module.i,".demo-1 .drag-item {\n  color: #fff;\n  width: 400px;\n  height: 50px;\n  line-height: 50px;\n  border-bottom: 1px solid red; }\n\n.demo-2 {\n  display: flex;\n  align-items: center; }\n  .demo-2 .drag-item {\n    color: #fff;\n    width: 100px;\n    height: 50px;\n    line-height: 50px;\n    margin-right: 20px;\n    border: 1px solid red; }\n",""])},46:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(25),__webpack_require__(21),__webpack_require__(5),__webpack_require__(61),__webpack_require__(62),__webpack_require__(129),__webpack_require__(86);var react=__webpack_require__(8),react_default=__webpack_require__.n(react),_prop_types_15_7_2_prop_types=(__webpack_require__(58),__webpack_require__(45)),_prop_types_15_7_2_prop_types_default=__webpack_require__.n(_prop_types_15_7_2_prop_types),_classnames_2_2_6_classnames=__webpack_require__(153),_classnames_2_2_6_classnames_default=__webpack_require__.n(_classnames_2_2_6_classnames);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var component_Component=function(_React$Component){function Component(){return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Component),_possibleConstructorReturn(this,_getPrototypeOf(Component).apply(this,arguments))}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Component,react_default.a.Component),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Component,[{key:"classNames",value:function classNames(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _classnames_2_2_6_classnames_default()(args)}},{key:"className",value:function(){for(var className=this.props.className,_len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return this.classNames.apply(this,args.concat([className]))}},{key:"style",value:function(args){var style=this.props.style;return Object.assign({},args,style)}}]),Component}();function drag_sort_typeof(obj){return(drag_sort_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function drag_sort_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function drag_sort_getPrototypeOf(o){return(drag_sort_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function drag_sort_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function drag_sort_setPrototypeOf(o,p){return(drag_sort_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}component_Component.propTypes={className:_prop_types_15_7_2_prop_types_default.a.string,style:_prop_types_15_7_2_prop_types_default.a.object},component_Component.__docgenInfo={description:"",methods:[{name:"classNames",docblock:null,modifiers:[],params:[{name:"...args",type:null}],returns:null},{name:"className",docblock:null,modifiers:[],params:[{name:"...args",type:null}],returns:null},{name:"style",docblock:null,modifiers:[],params:[{name:"args",type:null}],returns:null}],displayName:"Component",props:{className:{type:{name:"string"},required:!1,description:""},style:{type:{name:"object"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["libs/component.js"]={name:"Component",docgenInfo:component_Component.__docgenInfo,path:"libs/component.js"});var drag_sort_DragSort=function(_PureComponent){function DragSort(props){var _this;return function drag_sort_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DragSort),_this=function drag_sort_possibleConstructorReturn(self,call){return!call||"object"!==drag_sort_typeof(call)&&"function"!=typeof call?drag_sort_assertThisInitialized(self):call}(this,drag_sort_getPrototypeOf(DragSort).call(this,props)),_defineProperty(drag_sort_assertThisInitialized(_this),"addDragItem",function(item){_this.dragItemList.push(item)}),_defineProperty(drag_sort_assertThisInitialized(_this),"removeDragItem",function(item){item&&_this.dragItemList.splice(_this.dragItemList.indexOf(item),1)}),_defineProperty(drag_sort_assertThisInitialized(_this),"handleMouseDown",function(e){var options=_this.props.options,type=e.type,target=e.target,originalTarget=e.target.shadowRoot&&e.path&&e.path[0]||target;console.log(target,originalTarget),!(/mousedown|pointerdown/.test(type)&&0!==e.button||options.disabled)&&(_this.currentDragSortItem=_this.dragItemList.find(function(item){return item.node===target}),!0===_this.currentDragSortItem.props.draggable&&target.setAttribute("draggable",!0))}),_defineProperty(drag_sort_assertThisInitialized(_this),"handleDragEnter",function(e){console.log("==========================拖到元素上",e.target),e.target===_this.DragSortDom||_this.DragSortDom.insertBefore(_this.currentDragSortItem.node,e.target)}),_defineProperty(drag_sort_assertThisInitialized(_this),"handleDragLeave",function(e){console.log("=====================离开",e.target);var _assertThisInitialize=drag_sort_assertThisInitialized(_this),DragSortDom=_assertThisInitialize.DragSortDom,currentDragSortItem=_assertThisInitialize.currentDragSortItem;currentDragSortItem.node!==e.target&&e.target===_this.dragItemList[_this.dragItemList.length-1].node&&DragSortDom.appendChild(currentDragSortItem.node)}),_defineProperty(drag_sort_assertThisInitialized(_this),"handleDragStart",function(e){console.log("============111111========开始拖放",e.target)}),_defineProperty(drag_sort_assertThisInitialized(_this),"handleDragEnd",function(e){console.log("============111111========拖放结束",e.target),e.target.setAttribute("draggable",!1)}),_this.dragItemList=[],_this.currentDragSortItem=null,_this.DragSortDom=null,_this}return function drag_sort_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&drag_sort_setPrototypeOf(subClass,superClass)}(DragSort,component_Component),function drag_sort_createClass(Constructor,protoProps,staticProps){return protoProps&&drag_sort_defineProperties(Constructor.prototype,protoProps),staticProps&&drag_sort_defineProperties(Constructor,staticProps),Constructor}(DragSort,[{key:"getChildContext",value:function getChildContext(){return{component:this}}},{key:"render",value:function render(){var _this2=this,_this$props=this.props,Component=_this$props.tag,className=_this$props.className;return react_default.a.createElement(Component,{ref:function ref(e){_this2.DragSortDom=e},className:className,onDragEnter:this.handleDragEnter,onDragLeave:this.handleDragLeave,onMouseDown:this.handleMouseDown,onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd},this.props.children)}}]),DragSort}();drag_sort_DragSort.displayName="DragSort",drag_sort_DragSort.childContextTypes={component:_prop_types_15_7_2_prop_types_default.a.any},drag_sort_DragSort.defaultProps={tag:"div",className:"",options:{disabled:!1}},drag_sort_DragSort.propTypes={tag:_prop_types_15_7_2_prop_types_default.a.string,className:_prop_types_15_7_2_prop_types_default.a.string,options:_prop_types_15_7_2_prop_types_default.a.shape({disabled:_prop_types_15_7_2_prop_types_default.a.bool})},drag_sort_DragSort.__docgenInfo={description:"",methods:[{name:"addDragItem",docblock:null,modifiers:[],params:[{name:"item",type:null}],returns:null},{name:"removeDragItem",docblock:null,modifiers:[],params:[{name:"item",type:null}],returns:null},{name:"handleMouseDown",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"handleDragEnter",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"handleDragLeave",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"handleDragStart",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"handleDragEnd",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null}],displayName:"DragSort",props:{tag:{defaultValue:{value:"'div'",computed:!1},type:{name:"custom",raw:"PropTypes.string"},required:!1,description:""},className:{defaultValue:{value:"''",computed:!1},type:{name:"custom",raw:"PropTypes.string"},required:!1,description:""},options:{defaultValue:{value:"{\n    disabled:false\n}",computed:!1},type:{name:"custom",raw:"PropTypes.shape({\n    disabled:PropTypes.bool\n})"},required:!1,description:""}},childContext:{component:{type:{name:"custom",raw:"PropTypes.any"},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/drag-sort.jsx"]={name:"DragSort",docgenInfo:drag_sort_DragSort.__docgenInfo,path:"src/drag-sort.jsx"});__webpack_require__(44),__webpack_require__(319);function drag_sort_item_typeof(obj){return(drag_sort_item_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function drag_sort_item_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function drag_sort_item_getPrototypeOf(o){return(drag_sort_item_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function drag_sort_item_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function drag_sort_item_setPrototypeOf(o,p){return(drag_sort_item_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function drag_sort_item_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var drag_sort_item_DragSortItem=function(_PureComponent){function DragSortItem(props){var _this;return function drag_sort_item_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DragSortItem),_this=function drag_sort_item_possibleConstructorReturn(self,call){return!call||"object"!==drag_sort_item_typeof(call)&&"function"!=typeof call?drag_sort_item_assertThisInitialized(self):call}(this,drag_sort_item_getPrototypeOf(DragSortItem).call(this,props)),drag_sort_item_defineProperty(drag_sort_item_assertThisInitialized(_this),"parent",function(){return _this.context.component}),drag_sort_item_defineProperty(drag_sort_item_assertThisInitialized(_this),"domdrugstart",function(e,currentData){var key=drag_sort_item_assertThisInitialized(_this).key,data=_this.props.data;_this.currentDragData=currentData;var contentNode=e.target.firstElementChild;_this.currentDragNodeWidth=contentNode.clientWidth,_this.dragIngIndex=_.findIndex(data,function(item){return item[key]===currentData[key]})}),drag_sort_item_defineProperty(drag_sort_item_assertThisInitialized(_this),"dragenter",function(e,enterData){var _assertThisInitialize2=drag_sort_item_assertThisInitialized(_this),currentDragData=_assertThisInitialize2.currentDragData,key=_assertThisInitialize2.key,currentDragNodeWidth=_assertThisInitialize2.currentDragNodeWidth,_this$props=_this.props,data=_this$props.data,onChange=_this$props.onChange;_this.enterDragData=enterData,enterData[key]&&-1!==_this.dragIngIndex&&enterData[key]!==currentDragData[key]&&(console.log("============进来了",enterData.name),_this.dragEnterIndex=_.findIndex(data,function(item){return item[key]===enterData[key]}),data.splice(_this.dragIngIndex,1),data.splice(_this.dragEnterIndex,0,"kongdezhanweide"),console.log(_this.dragIngIndex,_this.dragEnterIndex),onChange(data),window.setTimeout(function(){_this.kongdeNode.style.width="".concat(currentDragNodeWidth,"px")},50),window.clearTimeout(_this.throttleTime))}),drag_sort_item_defineProperty(drag_sort_item_assertThisInitialized(_this),"dragleave",function(e,leaveData){var _assertThisInitialize3=drag_sort_item_assertThisInitialized(_this),enterDragData=_assertThisInitialize3.enterDragData,key=_assertThisInitialize3.key;if(console.log("============离开了",leaveData.name),enterDragData[key]===leaveData[key]&&_this.throttleTime&&(window.clearTimeout(_this.throttleTime),_this.throttleTime=0),!leaveData[key]){var _this$props2=_this.props,data=_this$props2.data,onChange=_this$props2.onChange;data.splice(_this.dragEnterIndex,1,_this.currentDragData),onChange(data)}}),drag_sort_item_defineProperty(drag_sort_item_assertThisInitialized(_this),"drop",function(e){e.preventDefault();var _this$props3=_this.props,data=_this$props3.data,onChange=_this$props3.onChange;console.log("================================="),data.splice(_this.dragEnterIndex,1,_this.currentDragData),onChange(data)}),drag_sort_item_defineProperty(drag_sort_item_assertThisInitialized(_this),"dragOver",function(e){e.preventDefault(),console.log("==================dragOver")}),_this.node=null,_this}return function drag_sort_item_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&drag_sort_item_setPrototypeOf(subClass,superClass)}(DragSortItem,component_Component),function drag_sort_item_createClass(Constructor,protoProps,staticProps){return protoProps&&drag_sort_item_defineProperties(Constructor.prototype,protoProps),staticProps&&drag_sort_item_defineProperties(Constructor,staticProps),Constructor}(DragSortItem,[{key:"componentDidMount",value:function componentDidMount(){this.parent().addDragItem(this)}},{key:"componentWillMount",value:function componentWillMount(){this.parent().removeDragItem(this)}},{key:"render",value:function render(){var _this2=this,_this$props4=this.props,Component=_this$props4.tag,id=_this$props4.id,className=_this$props4.className;_this$props4.draggable;return react_default.a.createElement(Component,{"data-id":id,className:className,ref:function ref(e){_this2.node=e}},this.props.children)}}]),DragSortItem}();drag_sort_item_DragSortItem.displayName="DragSortItem",drag_sort_item_DragSortItem.contextTypes={component:_prop_types_15_7_2_prop_types_default.a.any},drag_sort_item_DragSortItem.defaultProps={tag:"div",className:"",draggable:!0},drag_sort_item_DragSortItem.propTypes={tag:_prop_types_15_7_2_prop_types_default.a.string,className:_prop_types_15_7_2_prop_types_default.a.string,id:_prop_types_15_7_2_prop_types_default.a.string.isRequired,draggable:_prop_types_15_7_2_prop_types_default.a.bool},drag_sort_item_DragSortItem.__docgenInfo={description:"",methods:[{name:"parent",docblock:"获得父元素",modifiers:[],params:[],returns:null,description:"获得父元素"},{name:"domdrugstart",docblock:null,modifiers:[],params:[{name:"e",type:null},{name:"currentData",type:null}],returns:null},{name:"dragenter",docblock:null,modifiers:[],params:[{name:"e",type:null},{name:"enterData",type:null}],returns:null},{name:"dragleave",docblock:null,modifiers:[],params:[{name:"e",type:null},{name:"leaveData",type:null}],returns:null},{name:"drop",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"dragOver",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null}],displayName:"DragSortItem",props:{tag:{defaultValue:{value:'"div"',computed:!1},type:{name:"custom",raw:"PropTypes.string"},required:!1,description:""},className:{defaultValue:{value:'""',computed:!1},type:{name:"custom",raw:"PropTypes.string"},required:!1,description:""},draggable:{defaultValue:{value:"true",computed:!1},type:{name:"custom",raw:"PropTypes.bool"},required:!1,description:""},id:{type:{name:"custom",raw:"PropTypes.string.isRequired"},required:!1,description:""}},context:{component:{type:{name:"custom",raw:"PropTypes.any"},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/drag-sort-item.jsx"]={name:"DragSortItem",docgenInfo:drag_sort_item_DragSortItem.__docgenInfo,path:"src/drag-sort-item.jsx"}),drag_sort_DragSort.Item=drag_sort_item_DragSortItem;__webpack_exports__.a=drag_sort_DragSort},90:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a=[{name:"我是1",id:"1"},{name:"我是2",id:"2"},{name:"我是3",id:"3"},{name:"我是4",id:"4"},{name:"我是5",id:"5"}]}},[[154,1,2]]]);
//# sourceMappingURL=main.b674c1934bf6ccf98815.bundle.js.map